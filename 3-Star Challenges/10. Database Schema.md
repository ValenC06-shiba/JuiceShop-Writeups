<img width="366" height="178" alt="image" src="https://github.com/user-attachments/assets/63a2210d-8841-433e-8232-ea636421914f" />

# SQL Injection to get data
Looking at the home page of JuiceShop, I found that the URL always has a suffix with `search?q=` seeing this, it most likely inputs to an sql query with 
some type of `like` clause, I tried a typical "or true" injection to see if it will return anything.

<img width="1205" height="619" alt="image" src="https://github.com/user-attachments/assets/fe43c108-9294-4e92-b26b-e6f32e60c8db" />

From the response, we can see that it is using SQLite and the full query looked like: 

`"SELECT * FROM Products WHERE ((name LIKE '%`**\<our input\>**`%' OR description LIKE '%'or 1=1--%') AND deletedAt IS NULL) ORDER BY name"`

Seeing this, we can try and manipulate the query to return the Database Schema.

Refreshing my SQL knowledge I tried to add additional clauses to the query by ending it early.
This meant starting the query with `gibberish'))` to make the query get nothing 
(so that it doesnt interrupt our final result) and disregard everything behind our input.

Then, we try to add a union clause to get the table data that we actually want.

`asdf'))+UNION+SELECT+*+FROM+sqlite_master+WHERE+type='table'--` 

Using the above input, we get the following error:

<img width="1206" height="610" alt="image" src="https://github.com/user-attachments/assets/5192c6be-fa0f-438e-ad52-9de45f80a873" />

We're on the right track, since we dont know the exact number of collumns, 
we can try one by one to see how many collumns there are by repeating 1,2,3,4,5..... after the select clause to see how many collumns there are
After repeated attempts, we discover there are 9 collumns:

`asdf'))+UNION+SELECT+1,2,3,4,5,6,7,8,9+FROM+sqlite_master+WHERE+type='table'--` 

<img width="1214" height="653" alt="image" src="https://github.com/user-attachments/assets/bf6d2e64-ced7-4d97-9cd9-5308016fc4fc" />

These are the collumn names of the products table, which we don't really care for, we just want to make sure we can do the union select with matching collumns
We do however know the structure of the database schema that is :

Column&emsp;&emsp;&emsp;&emsp;&emsp;Description <br/>
type &emsp; &emsp;&emsp;&emsp;&emsp;&emsp;The type of object: 'table', 'index', 'view', or 'trigger' <br/>
name&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;The name of the object ( table name,index name, etc based on the type specified) <br/>
rootpage &emsp;&emsp;&emsp;&emsp; The page number of the root B-tree page for tables and indexes (internal) <br/>
sql &emsp; &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;The original SQL statement used to create the object <br/>


Since we want the Table data of the database, we can add our input as such:
`asdf'))+UNION+SELECT+1,name,sql,4,5,6,7,8,9+FROM+sqlite_master+WHERE+type='table'--` 

<img width="1212" height="616" alt="image" src="https://github.com/user-attachments/assets/09e87cc4-9514-4236-a4c7-06bbbd082e88" />

The challenge is now solved, and we can save these table structures for future SQL injections.


